# Обработчик аргументов командной строки

Библиотека предназначена для обработки флагов и аргументов коммандной строки.
#### Пример использования
Подключить заголовочные файлы.
```c
#include <stdio.h>
#include "cmd_args.h"
```
Создать функцию обработчик флага. Функция должна возвращать 0. Если вернуть другое значение обработка прервётся.
```c
int HelloMessage( const char *key, const char *val, void *userData ) {
    printf( "Hello '%s'\n", val );
    return 0;
}
```
Главная функция.
```c
int main( int argc, char **argv ) {
    cmdArgs_t args;
    
    /* Инициализация библиотеки */
    /* Обработчик флагов '-h' и '--help' создётся вызовом этой функции */
    CmdOptInit();
    
    /* Добавление своего обработчика флага */
    CmdOptAdd( "-H", "--hello", "Print `Hello <value>` message.", 1, HelloMessage );
   
   /* Обработать все аргументы командной строки */
    if( 0 != CmdOptProcess( &args, argc, argv, NULL ) ) {
        /* если какой-либо обработчик вернул отличное от нуля значение, то будет
        выполнен этот фрагмент кода. Например -h и --help после обработки продолжат
        выполнение этого кода */
        return 0;
    }
    
    /* Далее обработчик флагов не нужен. Можно освобождать память. */
    CmdOptFinal();
    
    /* Все аргументы которые не были флагами после обработки будут записаны в 
    переменную args */
    int i;
    for( i = 0; i < args.argc; i++ ) {
        printf( "%s\n", args.argv[i] );
    }
    
    /* Освобождене памяти */
    CmdOptProcessFinal( &args );
    return 0;
}
```

#### Комиляция
Скачать репозиторий и выполнить 'make'.

#### Дерективы компилятора
```
CMD_ARGS_NODBG
DEBUG
```
Если будут определены обе директивы то дебаг будет отключён. Для включения дебага нужно определить только одну директиву **DEBUG**

#### Примеры выполенния тестовой программы
###### Пример 1
Вывести список флагов (флаг '-h'). Аргументы **arg1** и **arg2** будут помещены в переменную **args**.
```sh
C:\cmd-args> app.exe arg1 -h arg2
-h, --help          Print this message and exit.
-H, --hello         Print `Hello <value>` message.
```

###### Пример 2
Протестировать флаг '- -hello'. Аргумент **arg1** будет помещен в переменную **args**. Аргумент **arg2** будет обработан как значение флага '- -hello'.
```sh
C:\cmd-args> app.exe arg1 --hello arg2
Hello 'arg2'
app.exe
arg1
```

###### Пример 3
Проверить обработку несуществующих флагов.
```
C:\cmd-args> app.exe arg1 --noflag arg2
error: unknown flag '--noflag'.
```